unit uCadastrodeFuncionarios;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, uCadastrodePessoas, Vcl.StdCtrls,
  uFuncionarios, uCtrlFuncionarios, uConsultaCidades;

type
  TCadastrodeFuncionarios = class(TCadastrodePessoas)
    lbl_CNPJ: TLabel;
    edt_CNPJ: TEdit;
    lbl_DataAdmissao: TLabel;
    lbl_DataDemissao: TLabel;
    edt_DataAdmissao: TEdit;
    edt_DataDemissao: TEdit;
    lbl_VSalario: TLabel;
    edt_VSalario: TEdit;
    lbl_Celular: TLabel;
    edt_Celular: TEdit;
 private
    { Private declarations }
    oFuncionario     : Funcionarios;
    aCtrlFuncionario : CtrlFuncionarios;
    oConsultaCidades : TConsultaCidades;

  public
    { Public declarations }
    procedure sair;                               override;
    procedure salvar;                             override;
    procedure limpaEdit;                          override;
    procedure carregaEdit;                        override;
    procedure bloqueiaEdit;                       override;
    procedure desbloqueiaEdit;                    override;
    procedure conhecaObj(pObj, pCtrl : TObject);  override;
    procedure setConsulta(pObj : TObject);        override;
  end;

var
  CadastrodeFuncionarios: TCadastrodeFuncionarios;

implementation

{$R *.dfm}

{ TCadastrodeFuncionarios }

procedure TCadastrodeFuncionarios.bloqueiaEdit;
begin
  inherited;
   edt_Nome.Enabled          := false;
   edt_RG.Enabled            := false;
   edt_CPF.Enabled           := false;
   edt_Sexo.Enabled          := false;
   edt_Telefone.Enabled      := false;
   edt_Celular.Enabled       := false;
   edt_Email.Enabled         := false;
   edt_CEP.Enabled           := false;
   edt_Bairro.Enabled        := false;
   edt_Logradouro.Enabled    := false;
   edt_Numero.Enabled        := false;
   edt_Complemento.Enabled   := false;
   edt_codCidade.Enabled     := false;
   edt_VSalario.Enabled      := false;
   edt_DataAdmissao.Enabled  := false;
   edt_DataDemissao.Enabled  := false;
   dt_DataNasc.Enabled      := false;

end;

procedure TCadastrodeFuncionarios.carregaEdit;
begin
   inherited;
   self.edt_Codigo.Text     := inttostr( oFuncionario.getCodigo);
   edt_Nome.text            :=oFuncionario.getNome;
   edt_RG.text              :=oFuncionario.getRG;
   edt_CPF.text             :=oFuncionario.getCPF;
   edt_Sexo.text            :=oFuncionario.getSexo;
   edt_Telefone.text        :=oFuncionario.getTelefone;
   edt_Celular.text         :=oFuncionario.getCelular;
   edt_Email.text           :=oFuncionario.getEmail;
   edt_CEP.text             :=oFuncionario.getCEP;
   edt_Bairro.text          :=oFuncionario.getBairro;
   edt_Logradouro.text      :=oFuncionario.getLogradouro;
   edt_Numero.text          :=oFuncionario.getNumero;
   edt_Complemento.text     :=oFuncionario.getComplemento;
   edt_VSalario.text        := CurrtoStr(oFuncionario.getVSalario);
   edt_DataAdmissao.text    :=oFuncionario.getDataAdmissao;
   edt_DataDemissao.text     :=oFuncionario.getDataDemissao;
   //dt_DataNasc.text          :=oFuncionario.getDataNasc;
   edt_codCidade.Text       := inttoStr(oFuncionario.getaCidade.getCodigo);
   edt_Cidade.Text          := oFuncionario.getacidade.getCidade;
   self.edt_DataCad.Text    := oFuncionario.getDataCad;
   self.edt_DataUltAlt.Text := oFuncionario.getDataUltAlt;

end;

procedure TCadastrodeFuncionarios.conhecaObj(pObj, pCtrl: TObject);
begin
  inherited;
  oFuncionario     := Funcionarios(pObj);
  aCtrlFuncionario := CtrlFuncionarios(pCtrl);
  self.limpaEdit;
  self.carregaEdit;

end;

procedure TCadastrodeFuncionarios.desbloqueiaEdit;
begin
   inherited;
   edt_Nome.Enabled         :=true;

   edt_CNPJ.Enabled         :=true;
   edt_RG.Enabled           :=true;
   edt_CPF.Enabled          :=true;
   edt_Sexo.Enabled         :=true;
   edt_Telefone.Enabled     :=true;
   edt_Celular.Enabled      :=true;
   edt_Email.Enabled        :=true;
   edt_CEP.Enabled          :=true;
   edt_Bairro.Enabled       :=true;
   edt_Logradouro.Enabled   :=true;
   edt_Numero.Enabled       :=true;
   edt_Complemento.Enabled  :=true;
   edt_codCidade.Enabled    :=true;
   edt_VSalario.Enabled     :=true;
   edt_DataAdmissao.Enabled :=true;
   edt_DataDemissao.Enabled :=true;
   dt_DataNasc.Enabled     :=true;


end;



procedure TCadastrodeFuncionarios.limpaEdit;
begin
   inherited;
   self.edt_Nome.Clear;
   self.edt_RG.Clear;
   self.edt_CPF.Clear;
   self.edt_CNPJ.Clear;
   self.edt_Sexo.Clear;
   self.edt_Telefone.Clear;
   self.edt_Celular.Clear;
   self.edt_Email.Clear;
   self.edt_CEP.Clear;
   self.edt_Bairro.Clear;
   self.edt_Logradouro.Clear;
   self.edt_Numero.Clear;
   self.edt_Complemento.Clear;
   self.edt_codCidade.Clear;
   self.edt_VSalario.Clear;
   self.edt_DataAdmissao.Clear;
   self.edt_DataDemissao.Clear;
   //self.dt_DataNasc.Clear;

end;

procedure TCadastrodeFuncionarios.sair;
begin
  inherited;

end;

procedure TCadastrodeFuncionarios.Salvar;
var
   msg: string;
begin
  inherited;
  if self.edt_Nome.Text = '' then
  begin
    showmessage('Campo Nome eh Obrigatorio!');
    self.edt_Nome.SetFocus;
  end
  else if edt_RG.Text = '' then
  begin
    showmessage('Campo RG eh Obrigatorio!');
    edt_RG.SetFocus;
  end
  else  if edt_CPF.Text = '' then
  begin
    showmessage('Campo CPF eh Obrigatorio!');
    edt_CPF.SetFocus;
  end
  else  if edt_CNPJ.Text = '' then
  begin
    showmessage('Campo CNPJ eh Obrigatorio!');
    edt_CNPJ.SetFocus;
  end
  else if edt_Telefone.Text = '' then
  begin
    showmessage('Campo Telefone eh Obrigatorio!');
    edt_Telefone.SetFocus;
  end
  else if edt_Numero.Text = '' then
  begin
    showmessage('Campo Numero eh Obrigatorio!');
    edt_Numero.SetFocus;
  end

  //else  if edt_codcidade.Text = '' then
  //begin
   //  showmessage('Campo codCidade Cidade eh Obrigatorio!');
  //   self.edt_codCidade.SetFocus;
 //end
  else
  begin
     oFuncionario.setCodigo       (strtoint(edt_Codigo.Text));
     oFuncionario.setNome         (edt_Nome.Text);
     oFuncionario.setRG           (edt_RG.Text);
     oFuncionario.setCPF          (edt_CPF.Text);
     oFuncionario.setSexo         (edt_Sexo.Text);
     oFuncionario.setTelefone     (edt_Telefone.Text);
     oFuncionario.setCelular      (edt_Celular.Text);
     oFuncionario.setEmail        (edt_Email.Text);
     oFuncionario.setCEP          (edt_CEP.Text);
     oFuncionario.setBairro       (edt_Bairro.Text);
     oFuncionario.setLogradouro   (edt_Logradouro.Text);
     oFuncionario.setNumero       (edt_Numero.Text);
     oFuncionario.setComplemento  (edt_Complemento.Text);
   //  oFuncionario.setVSalario      (CurrtoStr(edt_VSalario.Text));
     oFuncionario.setDataAdmissao (edt_DataAdmissao.Text);
     oFuncionario.setDataDemissao (edt_DataDemissao.Text);
    // oFuncionario.setDataNasc     (dt_DataNasc.Text);
     oFuncionario.getaCidade.setCodigo (strtoint(edt_codCidade.Text));
     oFuncionario.getaCidade.setCidade (edt_Cidade.Text);
     aCtrlFuncionario.Salvar(oFuncionario.clone);




  end;


end;
procedure TCadastrodeFuncionarios.setConsulta(pObj: TObject);
begin
  inherited;
  oConsultaCidades := TConsultaCidades(pObj);
end;

end.
